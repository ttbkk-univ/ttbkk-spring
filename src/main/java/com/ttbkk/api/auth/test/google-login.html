<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.0.0-alpha.1/axios.min.js"
            integrity="sha512-xIPqqrfvUAc/Cspuj7Bq0UtHNo/5qkdyngx6Vwt+tmbvTLDszzXM0G6c91LXmGrRx8KEPulT+AfOOez+TeVylg=="
            crossorigin="anonymous" referrerpolicy="no-referrer"></script>
</head>
<body>
<div
        id="g_id_onload"
        data-client_id="849238286511-utifb85m2v9gm55f14p7s21din35ee0o.apps.googleusercontent.com"
        data-callback="callback"
>
</div>
<div>
    <li>
        <span>socialId</span>
        <input id="socialId"></input>
    </li>
</div>
<script>
    function callback(data) {
        const baseUrl = "http://localhost:8080";
        console.log({googleJWT: data.credential});
        axios.post(
            `${baseUrl}/auth/signin/google`,
            {authProviderToken: data.credential},
        )
            .then((res) => {
                const {accessToken} = res.data;
                console.log({ttbkkJWT: accessToken});
                return accessToken;
            })
            .then((accessToken) => {
                return axios.get(
                    `${baseUrl}/auth/myinfo`,
                    {
                        headers: {
                            Authorization: `Bearer ${accessToken}`,
                        },
                    }
                );
            })
            .then((res) => {
                const {socialId} = res.data;
                console.log({myinfo: res.data});
                const emailElement = document.getElementById("socialId");
                emailElement.setAttribute("value", socialId);
            })
    }
</script>
</body>
</html>